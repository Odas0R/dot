#!/bin/bash

set -e

if [ ! -x "$(command -v nvim)" ]; then
  echo "Need to install neovim" >&2
  exit 1
fi

NVIM="$HOME/.config/nvim"

# creates the nvim config directory
mkdir -p "$NVIM"

# setups
ln -sf "$HOME/dot/nvim/init.vim" "$NVIM/init.vim"
ln -sf "$HOME/dot/nvim/init.vim" "$HOME/.vimrc"
ln -sf "$HOME/dot/nvim/spell" "$NVIM/spell"

# setup snippets
mkdir -p "$HOME/snippets"
ln -sf "$HOME/dot/nvim/ultisnips" "$HOME/snippets/ultisnips"

# setup lua scripts
mkdir -p "$NVIM/lua"
mkdir -p "$NVIM/lua/odas0r"
find "$HOME/dot/nvim/lua/odas0r" -name "*.lua" | xargs -I{} ln -sf {} "$NVIM/lua/odas0r"

# installing plug
if [[ ! -f "$NVIM/autoload/plug.vim" ]]; then
  curl -fLo "$NVIM/autoload/plug.vim" --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
fi

printf "To install all vim plugins :PlugInstall!\n"

echo "Vim setup done! ðŸŒŸ"
