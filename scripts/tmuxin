#!/usr/bin/env bash

set -e

wallServer=$(markpath wall-server)

# Tags Explanation
# -c: path of the session
# -s: session name
# -n: window name
# -d: "detach"
# send-keys: C-m -> Enter Key

# =====================
# wallstreeters session
# =====================
#
# manage the project wallstreeters

session="wallstreeters"
if tmux has-session -t $session &>/dev/null; then
  tmux kill-session -t "$session"
fi

tmux new-session -c "$wallServer" -s "$session" -n sql -d
tmux send-keys -t "$session" "source ~/.bashrc && vf" C-m

tmux split-window -c "$wallServer" -t "$session" -h
tmux send-keys -t "$session" "source ~/.bashrc && vf" C-m

tmux new-window -c "$wallServer" -t "$session"
# tmux split-window -c "$wallServer" -t "$session" -h

tmux select-window -t :+1 \; last-pane

# =================
# Session to Attach
# =================
# tmux attach-session -t "wallstreeters"
